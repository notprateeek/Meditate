{"ast":null,"code":"import _slicedToArray from\"/Users/suyeonkang/Desktop/web development/Project/metta/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect,useCallback}from'react';import{Redirect}from'react-router-dom';import{Container}from'./ThemeStyles';import ProgressBar from'../../components/ProgressBar/ProgressBar';import TimerBtn from'../../components/Button/TimerBtn';import PlayBtn from'../../components/Button/PlayBtn';import DynamicText from'../../components/DynamicText/DynamicText';function Theme(props){var url=props.url,theme=props.theme;var _useState=useState(new Audio(url)),_useState2=_slicedToArray(_useState,1),audio=_useState2[0];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),playing=_useState4[0],setPlaying=_useState4[1];var _useState5=useState(360),_useState6=_slicedToArray(_useState5,2),duration=_useState6[0],setDuration=_useState6[1];var _useState7=useState(0),_useState8=_slicedToArray(_useState7,2),currentTime=_useState8[0],setCurrentTime=_useState8[1];var handleClick=useCallback(function(time){return setDuration(time);},[]);var handleToggle=useCallback(function(){return setPlaying(!playing);},[playing]);var updateTime=function updateTime(){if(playing)setDuration(duration-1);};var updateCurrentTime=useCallback(function(){return setCurrentTime(audio.currentTime);},[audio.currentTime]);// Audio\nuseEffect(function(){audio.addEventListener('timeupdate',updateCurrentTime);return function(){return audio.removeEventListener('timeupdate',updateCurrentTime);};},[audio,updateCurrentTime]);useEffect(function(){playing?audio.play():audio.pause();return function(){audio.pause();};},[playing,audio]);// Timer\nuseEffect(function(){if(playing){var token=setTimeout(updateTime,1000);return function cleanUp(){clearTimeout(token);};}});if(currentTime>=duration){return/*#__PURE__*/React.createElement(Redirect,{to:\"/congraturation\"});}return/*#__PURE__*/React.createElement(Container,null,/*#__PURE__*/React.createElement(DynamicText,{playing:playing}),/*#__PURE__*/React.createElement(ProgressBar,{playing:playing,duration:duration,currentTime:Math.floor(currentTime),theme:theme}),/*#__PURE__*/React.createElement(PlayBtn,{playing:playing,onClick:handleToggle}),/*#__PURE__*/React.createElement(TimerBtn,{onClick:handleClick}),props.children);}export default React.memo(Theme);","map":{"version":3,"sources":["/Users/suyeonkang/Desktop/web development/Project/metta/src/containers/Theme/Theme.js"],"names":["React","useState","useEffect","useCallback","Redirect","Container","ProgressBar","TimerBtn","PlayBtn","DynamicText","Theme","props","url","theme","Audio","audio","playing","setPlaying","duration","setDuration","currentTime","setCurrentTime","handleClick","time","handleToggle","updateTime","updateCurrentTime","addEventListener","removeEventListener","play","pause","token","setTimeout","cleanUp","clearTimeout","Math","floor","children","memo"],"mappings":"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","sourcesContent":["import React, { useState, useEffect, useCallback } from 'react';\nimport { Redirect } from 'react-router-dom';\n\nimport { Container } from './ThemeStyles';\nimport ProgressBar from '../../components/ProgressBar/ProgressBar';\nimport TimerBtn from '../../components/Button/TimerBtn';\nimport PlayBtn from '../../components/Button/PlayBtn';\n\nimport DynamicText from '../../components/DynamicText/DynamicText';\n\nfunction Theme(props) {\n  const { url, theme } = props;\n  const [audio] = useState(new Audio(url));\n  const [playing, setPlaying] = useState(false);\n  const [duration, setDuration] = useState(360);\n  const [currentTime, setCurrentTime] = useState(0);\n\n  const handleClick = useCallback(time => setDuration(time), []);\n  const handleToggle = useCallback(() => setPlaying(!playing), [playing]);\n\n  const updateTime = () => {\n    if (playing) setDuration(duration - 1);\n  };\n\n  const updateCurrentTime = useCallback(\n    () => setCurrentTime(audio.currentTime),\n    [audio.currentTime]\n  );\n\n  // Audio\n  useEffect(() => {\n    audio.addEventListener('timeupdate', updateCurrentTime);\n\n    return () => audio.removeEventListener('timeupdate', updateCurrentTime);\n  }, [audio, updateCurrentTime]);\n\n  useEffect(() => {\n    playing ? audio.play() : audio.pause();\n\n    return () => {\n      audio.pause();\n    };\n  }, [playing, audio]);\n\n  // Timer\n  useEffect(() => {\n    if (playing) {\n      const token = setTimeout(updateTime, 1000);\n\n      return function cleanUp() {\n        clearTimeout(token);\n      };\n    }\n  });\n\n  if (currentTime >= duration) {\n    return <Redirect to=\"/congraturation\" />;\n  }\n\n  return (\n    <Container>\n      <DynamicText playing={playing} />\n      <ProgressBar\n        playing={playing}\n        duration={duration}\n        currentTime={Math.floor(currentTime)}\n        theme={theme}\n      />\n      <PlayBtn playing={playing} onClick={handleToggle} />\n      <TimerBtn onClick={handleClick} />\n      {props.children}\n    </Container>\n  );\n}\n\nexport default React.memo(Theme);\n"]},"metadata":{},"sourceType":"module"}