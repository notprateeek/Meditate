{"ast":null,"code":"import _slicedToArray from\"/Volumes/TOSHIBA EXT/dev/metta/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect,useCallback}from'react';import{Redirect}from'react-router-dom';import{Container}from'containers/Theme/ThemeStyles';import FadeText from'components/FadeText/FadeText';import ProgressBar from'components/ProgressBar/ProgressBar';import TimerBtn from'components/Button/TimerBtn';import PlayBtn from'components/Button/PlayBtn';function Theme(props){var url=props.url,theme=props.theme,bgImg=props.bgImg;var _useState=useState(new Audio(url)),_useState2=_slicedToArray(_useState,1),audio=_useState2[0];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),playing=_useState4[0],setPlaying=_useState4[1];var _useState5=useState(360),_useState6=_slicedToArray(_useState5,2),duration=_useState6[0],setDuration=_useState6[1];var _useState7=useState(0),_useState8=_slicedToArray(_useState7,2),currentTime=_useState8[0],setCurrentTime=_useState8[1];var handleClick=useCallback(function(time){return setDuration(time);},[]);var handleToggle=useCallback(function(){return setPlaying(!playing);},[playing]);var updateTime=function updateTime(){if(playing)setDuration(duration-1);};var updateCurrentTime=useCallback(function(){return setCurrentTime(audio.currentTime);},[audio.currentTime]);// Audio\nuseEffect(function(){audio.addEventListener('timeupdate',updateCurrentTime);return function(){return audio.removeEventListener('timeupdate',updateCurrentTime);};},[audio,updateCurrentTime]);useEffect(function(){playing?audio.play():audio.pause();return function(){return audio.pause();};},[playing,audio]);// Timer\nuseEffect(function(){if(playing){var token=setTimeout(updateTime,1000);return function(){return clearTimeout(token);};}});if(currentTime>=duration){return/*#__PURE__*/React.createElement(Redirect,{to:\"/congraturation\"});}return/*#__PURE__*/React.createElement(Container,{bgImg:bgImg},/*#__PURE__*/React.createElement(FadeText,{playing:playing}),/*#__PURE__*/React.createElement(ProgressBar,{playing:playing,duration:duration,currentTime:Math.floor(currentTime),theme:theme}),/*#__PURE__*/React.createElement(PlayBtn,{playing:playing,onClick:handleToggle}),/*#__PURE__*/React.createElement(TimerBtn,{onClick:handleClick,duration:duration}),props.children);}export default React.memo(Theme);","map":{"version":3,"sources":["/Volumes/TOSHIBA EXT/dev/metta/src/containers/Theme/Theme.js"],"names":["React","useState","useEffect","useCallback","Redirect","Container","FadeText","ProgressBar","TimerBtn","PlayBtn","Theme","props","url","theme","bgImg","Audio","audio","playing","setPlaying","duration","setDuration","currentTime","setCurrentTime","handleClick","time","handleToggle","updateTime","updateCurrentTime","addEventListener","removeEventListener","play","pause","token","setTimeout","clearTimeout","Math","floor","children","memo"],"mappings":"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","sourcesContent":["import React, { useState, useEffect, useCallback } from 'react';\nimport { Redirect } from 'react-router-dom';\nimport PropTypes from 'prop-types';\n\nimport { Container } from 'containers/Theme/ThemeStyles';\nimport FadeText from 'components/FadeText/FadeText';\nimport ProgressBar from 'components/ProgressBar/ProgressBar';\nimport TimerBtn from 'components/Button/TimerBtn';\nimport PlayBtn from 'components/Button/PlayBtn';\n\nfunction Theme(props) {\n  const { url, theme, bgImg } = props;\n  const [audio] = useState(new Audio(url));\n  const [playing, setPlaying] = useState(false);\n  const [duration, setDuration] = useState(360);\n  const [currentTime, setCurrentTime] = useState(0);\n\n  const handleClick = useCallback(time => setDuration(time), []);\n  const handleToggle = useCallback(() => setPlaying(!playing), [playing]);\n\n  const updateTime = () => {\n    if (playing) setDuration(duration - 1);\n  };\n\n  const updateCurrentTime = useCallback(\n    () => setCurrentTime(audio.currentTime),\n    [audio.currentTime]\n  );\n\n  // Audio\n  useEffect(() => {\n    audio.addEventListener('timeupdate', updateCurrentTime);\n    return () => audio.removeEventListener('timeupdate', updateCurrentTime);\n  }, [audio, updateCurrentTime]);\n\n  useEffect(() => {\n    playing ? audio.play() : audio.pause();\n    return () => audio.pause();\n  }, [playing, audio]);\n\n  // Timer\n  useEffect(() => {\n    if (playing) {\n      const token = setTimeout(updateTime, 1000);\n      return () => clearTimeout(token);\n    }\n  });\n\n  if (currentTime >= duration) {\n    return <Redirect to=\"/congraturation\" />;\n  }\n\n  return (\n    <Container bgImg={bgImg}>\n      <FadeText playing={playing} />\n      <ProgressBar\n        playing={playing}\n        duration={duration}\n        currentTime={Math.floor(currentTime)}\n        theme={theme}\n      />\n      <PlayBtn playing={playing} onClick={handleToggle} />\n      <TimerBtn onClick={handleClick} duration={duration} />\n      {props.children}\n    </Container>\n  );\n}\n\nTheme.propTypes = {\n  url: PropTypes.string,\n  theme: PropTypes.string,\n  bgImg: PropTypes.string,\n};\n\nexport default React.memo(Theme);\n"]},"metadata":{},"sourceType":"module"}